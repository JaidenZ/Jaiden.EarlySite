@using EarlySite.Model.Show;
@using EarlySite.Model.Common;
@{
    ViewBag.Title = "发现";
}

<div class="container">
    <div class="row">
        <div class="col-sm-8">
            <div class="row corner">
                <div class="QuickButtonSpan">
                    <div class="QuickButtonSpan-nav">
                        <button type="button" class="QuestionAskButton QuickButtonSpan-navItem Button--plain" onclick="GenerateDish()" title="分享单品">
                            <svg class="Icon" viewBox="0 0 18 18" width="16" height="16" aria-hidden="true" style="height: 16px; width: 16px;">
                                <title></title>
                                <g fill="none" fill-rule="evenodd">
                                    <path d="M9.595 2.023H4.842c-2.22 0-4.01 1.793-4.01 4.005v7.62c0 2.21 1.796 4.003 4.01 4.003h7.316c2.22 0 4.01-1.792 4.01-4.003v-7.11.51L14.523 8.72v4.253c0 1.66-1.336 3.004-3.01 3.004h-6.03c-1.66 0-3.008-1.338-3.008-3.004V6.7c0-1.657 1.336-3.002 3.01-3.002h2.467L9.595 2.03v-.007z" fill="#8590A6"></path>
                                    <path d="M6.372 11.08c-.185-.915.2-2.238.85-2.888l6.616-6.616c.565-.565 1.472-.567 2.038 0 .56.56.56 1.477 0 2.038L9.258 10.23c-.652.65-1.975 1.034-2.888.85z" stroke="#8590A6" stroke-width="1.5"></path>
                                    <path fill="#8590A6" d="M13.04 2.088l2.324 2.324-.987.986-2.323-2.324z"></path>
                                </g>
                            </svg>
                            分享单品
                        </button>
                        <button type="button" class="QuestionAskButton QuickButtonSpan-navItem Button--plain" onclick="GenerateStore()" title="发布商家">
                            <svg class="Icon" viewBox="0 0 18 18" width="16" height="16" aria-hidden="true" style="height: 16px; width: 16px;">
                                <title></title>
                                <g fill="none" fill-rule="evenodd">
                                    <path d="M9.595 2.023H4.842c-2.22 0-4.01 1.793-4.01 4.005v7.62c0 2.21 1.796 4.003 4.01 4.003h7.316c2.22 0 4.01-1.792 4.01-4.003v-7.11.51L14.523 8.72v4.253c0 1.66-1.336 3.004-3.01 3.004h-6.03c-1.66 0-3.008-1.338-3.008-3.004V6.7c0-1.657 1.336-3.002 3.01-3.002h2.467L9.595 2.03v-.007z" fill="#8590A6"></path>
                                    <path d="M6.372 11.08c-.185-.915.2-2.238.85-2.888l6.616-6.616c.565-.565 1.472-.567 2.038 0 .56.56.56 1.477 0 2.038L9.258 10.23c-.652.65-1.975 1.034-2.888.85z" stroke="#8590A6" stroke-width="1.5"></path>
                                    <path fill="#8590A6" d="M13.04 2.088l2.324 2.324-.987.986-2.323-2.324z"></path>
                                </g>
                            </svg>
                            发布商家
                        </button>
                        <button type="button" class="QuestionAskButton QuickButtonSpan-navItem Button--plain" onclick="GenerateRecipe()" title="创建食谱">
                            <svg class="Icon" viewBox="0 0 18 18" width="18" height="18" aria-hidden="true" style="height: 18px; width: 18px;">
                                <title></title>
                                <g fill="#8590A6">
                                    <path d="M12.63 2.02V0h1.35v2.02H16v1.35h-2.02V5.4h-1.35V3.36H10.6V2.02h2.03zm-.17 4.9h1.7v4.76c0 1.5-.17 2.05-.46 2.6-.3.55-.73.98-1.28 1.27-.54.3-1.1.45-2.6.45h-5.5c-1.5 0-2.05-.16-2.6-.45-.55-.3-.98-.72-1.27-1.27-.3-.55-.45-1.1-.45-2.6v-5.5c0-1.5.16-2.06.45-2.6.3-.55.72-.98 1.27-1.28.55-.3 1.1-.45 2.6-.45H9.1v1.7H4.3c-1.12 0-1.46.05-1.8.24-.26.1-.45.3-.58.55-.2.35-.26.7-.26 1.8v5.5c0 1.13.07 1.47.26 1.8.13.27.32.46.58.6.34.18.68.25 1.8.25h5.5c1.12 0 1.46-.06 1.8-.25.27-.13.46-.32.6-.58.18-.34.24-.68.24-1.8V6.9zM8.6 6.7c.7-.16 1.45.06 1.98.6.83.83.83 2.2 0 3.04l-.03.03c-.84.85-2.2.85-3.04 0l-1.92-2c-.25-.24-.64-.24-.88 0l-.04.04c-.25.28-.25.7 0 .95.15.16.37.22.57.17.4-.1.82.18.9.58.1.4-.16.82-.57.9-.7.17-1.46-.04-1.98-.58-.83-.85-.83-2.2 0-3.06l.03-.02c.86-.85 2.2-.85 3.05 0L8.6 9.3c.24.25.63.25.87 0l.03-.02c.25-.26.25-.67 0-.93-.16-.15-.37-.2-.58-.17-.4.1-.8-.16-.9-.57-.1-.4.16-.8.57-.9z"></path>
                                </g>
                            </svg>
                            创建食谱
                        </button>
                    </div>
                </div>
            </div>

            <!--模态弹出框-->
            <div id="generateDishmodal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true"></div>
            <div id="generateStoremodal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true"></div>
            <div id="generateRecipemodal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true"></div>
            <div class="row corner">
                <div class="warrper">
                    <div class="warrper-header">
                        <a class="warrper-header-title efont" href="">附近商家</a>
                        <span class="warrper-header-more"><a href="" class="efont">更多</a></span>
                    </div>
                    <div class="warrper-body">
                        @{
                            Html.RenderPartial("NearShopPartialView", (IList<Shop>)ViewBag.NearShop);
                        }

                    </div>
                </div>
            </div>
        </div>

        <div class="col-sm-3 col-sm-offset-1">
            <div class="row col-sm-12">
                <div class="row corner">
                    右边
                </div>
            </div>
        </div>
    </div>
</div>


<script src="http://cache.amap.com/lbs/static/es5.min.js"></script>
<script src="http://webapi.amap.com/maps?v=1.4.3&key=e024f773e61e96be65e2e8a4f0869774&&plugin=AMap.Scale,AMap.OverView,AMap.ToolBar"></script>

<script>

    $(function () {

        ////模态框加载时
        //$('#generateDishmodal').on("loaded.bs.modal", function () {
        //    console.log("模态框加载中");
        //});

        ////模态框show后
        //$('#generateDishmodal').on("show.bs.modal", function () {
        //    console.log("模态框将要展示");
        //});

        ////模态框完全展示后
        //$('#generateDishmodal').on("shown.bs.modal", function () {
        //    console.log("模态框已展示");
        //});

        //模态框隐藏时
        $('#generateDishmodal').on("hidden.bs.modal", function () {
            ////关闭移除弹出框数据
            //$(this).removeData('bs.modal');
            //$(this).find('.modal-content').children().remove();
            console.log("模态框已关闭");
        });

    });



    function GenerateDish() {
        //模态框初始化
        $('#generateDishmodal').modal({
            remote: "@Url.Action("GenerateDishShareView", "Component")",
            keyboard: true,
        });
    }
    function GenerateStore() {
        //模态框初始化
        $('#generateStoremodal').modal({
            remote: "@Url.Action("GenerateShopView", "Component")",
            keyboard: true,
        });
    }
    function GenerateRecipe() {
        //模态框初始化
        $('#generateRecipemodal').modal({
            remote: "@Url.Action("GenerateRecipesView", "Component")",
            keyboard: true,
        });
    }


</script>