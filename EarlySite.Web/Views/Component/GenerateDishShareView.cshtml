@using EarlySite.Model.Enum;
@{
    Layout = null;
}

<div class="modal-dialog" role="document">
    <div class="Modal-inner">
        <h3 class="Modal-title">分享单品</h3>
        <div class="Modal-subtitle">动人的描述更易打动人们的心</div>
        <div class="Modal-content">
            <div class="QuestionAsk">
                <form novalidate="">
                    <!--名称-->
                    <div class="QuestionAsk-section">
                        <div class="QuestionAsk-title">
                            <div class="Popover">
                                <div class="Input-wrapper Input-wrapper--spread Input-wrapper--large">
                                    <input id="generate_dishname" autocomplete="off" class="Input" placeholder="单品名称" value="" />
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--单品属性-->
                    <div class="QuestionAsk-section">
                        <div class="QuestionAsk-title">
                            <div class="Popover">
                                <div class="Input-wrapper Input-wrapper--spread Input-wrapper--large">
                                    <div class="col-sm-6">
                                        <div class="QuestionAsk-sectionHeader">
                                            <span class="QuestionAsk-label">用餐时间：</span>
                                        </div>
                                        <select id="generate_stmealtime" class="form-control selectpicker" data-size="5">
                                            @{
                                                foreach (var item in Enum.GetNames(typeof(MealTime)))
                                                {
                                                    <option value="@(((MealTime)Enum.Parse(typeof(MealTime), item)).GetHashCode())">@item</option>
                                                }
                                            }
                                        </select>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="QuestionAsk-sectionHeader">
                                            <span class="QuestionAsk-label">口味类型：</span>
                                        </div>
                                        <select id="generate_stdishtype" class="form-control selectpicker" data-size="5">
                                            @{
                                                foreach (var item in Enum.GetNames(typeof(DishType)))
                                                {
                                                    <option value="@(((DishType)Enum.Parse(typeof(DishType), item)).GetHashCode())">@item</option>
                                                }
                                            }
                                        </select>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                    <!--店铺设置-->
                    <div class="QuestionAsk-section">
                        <div class="TagInput TagInput--empty">
                            <div class="Popover">
                                <div class="Input-wrapper Input-wrapper--spread Input-wrapper--large">
                                    <input id="generate_shop" class="Input" autocomplete="off" placeholder="选择商家" value="" />
                                    <div class="Input-after">
                                        <svg class="Zi Zi--Search" fill="#afbdcf" viewBox="0 0 24 24" width="18" height="18"><path d="M17.068 15.58a8.377 8.377 0 0 0 1.774-5.159 8.421 8.421 0 1 0-8.42 8.421 8.38 8.38 0 0 0 5.158-1.774l3.879 3.88c.957.573 2.131-.464 1.488-1.49l-3.879-3.878zm-6.647 1.157a6.323 6.323 0 0 1-6.316-6.316 6.323 6.323 0 0 1 6.316-6.316 6.323 6.323 0 0 1 6.316 6.316 6.323 6.323 0 0 1-6.316 6.316z" fill-rule="evenodd"></path></svg>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--图片设置-->
                    <div class="QuestionAsk-section">
                        <div class="QuestionAsk-sectionHeader">
                            <span class="QuestionAsk-label">图片设置：</span>
                            <div class="QuestionAsk-sectionHeaderRight">
                                <button class="Button Editable-control Button--plain" data-tooltip="上传图片" data-tooltip-position="bottom" type="button" onclick="OpenFileSelect()">
                                    <svg class="Zi Zi--InsertImage" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M21 17.444C21 18.3 20.1 19 19 19H5c-1.1 0-2-.7-2-1.556V6.556C3 5.7 3.9 5 5 5h14c1.1 0 2 .7 2 1.556v10.888zm-9.437-3.919a.5.5 0 0 1-.862.013l-1.26-2.065a.5.5 0 0 0-.861.012l-2.153 3.767a.5.5 0 0 0 .435.748h10.292a.5.5 0 0 0 .438-.741L14.573 9.78a.5.5 0 0 0-.872-.006l-2.138 3.75z" fill-rule="evenodd"></path></svg>
                                </button>
                            </div>
                        </div>
                        <div class="Modal-content">
                            <div class="Enditable-picModal-uploader" onclick="OpenFileSelect()">
                                <div class="Enditable-picModal-uploader-icon">
                                    <svg class="Zi Zi--BackToTop" fill="currentColor" viewBox="0 0 24 24" width="70" height="70"><path d="M16.036 19.59a1 1 0 0 1-.997.995H9.032a.996.996 0 0 1-.997-.996v-7.005H5.03c-1.1 0-1.36-.633-.578-1.416L11.33 4.29a1.003 1.003 0 0 1 1.412 0l6.878 6.88c.782.78.523 1.415-.58 1.415h-3.004v7.005z"></path></svg>
                                </div>
                                <div class="Enditable-picModal-uploader-text">选择要上传的图片</div>
                                <div class="Enditable-picModal-uploader-tip">请上传大小不超过2MB的图片，并确保是图片格式</div>
                                <input id="picModaluploader" type="file" name="picmodal" />
                            </div>
                            <div class="UploadpicModal" hidden="hidden">
                                <img class="UploadpicModal-img" src="~/Themes/Images/defaultHead.png" />
                                <span></span>
                            </div>
                        </div>
                    </div>
                    <!--单品描述-->
                    <div class="QuestionAsk-section">
                        <div class="QuestionAsk-title">
                            <div class="Popover">
                                <div class="Input-wrapper Input-wrapper--spread Input-wrapper--multiline Input-wrapper--large">
                                    <textarea id="generate_des" rows="2" autocomplete="off" class="Input" placeholder="单品描述"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="ModalButtonGroup QuestionAsk-buttonGroup ModalButtonGroup--vertical">
                        <button class="Button Button--primary Button--red" type="button">提交</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <button type="button" class="Button Button--plain Modal-closeButton" aria-label="关闭" data-dismiss="modal">
        <svg class="modal-closeIcon" fill="#fff" viewBox="0 0 24 24" width="24" height="24"><path d="M13.486 12l5.208-5.207a1.048 1.048 0 0 0-.006-1.483 1.046 1.046 0 0 0-1.482-.005L12 10.514 6.793 5.305a1.048 1.048 0 0 0-1.483.005 1.046 1.046 0 0 0-.005 1.483L10.514 12l-5.208 5.207a1.048 1.048 0 0 0 .006 1.483 1.046 1.046 0 0 0 1.482.005L12 13.486l5.207 5.208a1.048 1.048 0 0 0 1.483-.006 1.046 1.046 0 0 0 .005-1.482L13.486 12z" fill-rule="evenodd"></path></svg>
    </button>

</div><!-- /.modal-dialog -->
<div>
    <div id="Popover100-content" class="Popover-content popover-content--null">
        <div class="Menu Autocomplete-menu" style="max-height:256px; overflow:scroll">
            <div class="Menu-item" role="option">
                <div class="AutoComplete-DefaultItem">商家一</div>
            </div>
            <div class="Menu-item" role="option">
                <div class="AutoComplete-DefaultItem">商家二</div>
            </div>
            <div class="Menu-item" role="option">
                <div class="AutoComplete-DefaultItem">商家三</div>
            </div>
        </div>
    </div>

</div>


<script>

    $(function () {

        //渲染焦点效果
        $('.Input').on('focus', function () {
            $(this).parent().addClass('is-focus');
        });
        $('.Input').on('blur', function () {
            $(this).parent().removeClass('is-focus');
        });

        //选择框初始化
        var mealtimeval = @(((MealTime)ViewBag.Meal).GetHashCode());
        $('#generate_stmealtime').selectpicker('val', mealtimeval);
        $('#generate_stdishtype').selectpicker();


        //动态搜索框初始化

        //图片上传器初始化
        $('#picModaluploader').on('change', function (e) {
            console.log($(e.currentTarget));
        });
        

        //渲染商家搜索选择框效果
        $('.Menu-item').hover(function () {
            $(this).addClass('is-active');
        },function () {
            $(this).removeClass('is-active');
        });
    });


    //打开文件选择
    function OpenFileSelect() {
        $('#picModaluploader')[0].click();
    }



</script>